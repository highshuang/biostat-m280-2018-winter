---
title: "m280_hw1"
author: "Shuang Gao"
date: "2018/01/17"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Question 2
1. How many persons are in the data set (statisticians call this `n`)? How many SNPs are in the data set (statisticians call this `p`)?
```{bash}
wc -l /home/m280-data/hw1/merge-geno.fam
#959

wc -l /home/m280-data/hw1/merge-geno.bim
#8348674 

```

2. Which chromosomes does this data set contain? How many SNPs are in each chromosome?

Here are chromosomes:
```{bash}
awk '{a[$1]}END{for(b in a){print b}}' /home/m280-data/hw1/merge-geno.bim |sort -n

awk '{a[$1]++}END{for(b in a){print "in chromosone " b " there are "  a[b]" SNPs"}}' /home/m280-data/hw1/merge-geno.bim | sort -nk3


```

3. MAP4 (microtubule-associated protein 4) is a gene on chromosome 3 spanning positions 47,892,180 bp -- 48,130,769 bp. How many SNPs are located within MAP4 gene?

```{bash}
awk 'BEGIN{count=0}{if($1==3 && $4 >= 47892180 && $4 <= 48130769) count++}END{print count}' /home/m280-data/hw1/merge-geno.bim
#894
```


4-1 Reformat Data set
```{bash}
awk 'BEGIN{print "    2.40  = FILE FORMAT VERSION NUMBER.\n8348674  = NUMBER OF SNPS LISTED HERE."}{OFS = ","}{print $2, $1 ,$4}' /home/m280-data/hw1/merge-geno.bim > reformat_merge-geno.txt
head reformat_merge-geno.txt

```
4-2 Reformat Data set


```{bash}

awk -v sex="" '{OFS =","}{if ($5 == 1) sex = "M";else sex="F"}{print $1,$2 ,$3, $4,sex,$6}' /home/m280-data/hw1/merge-geno.fam | sed 's/T2DG//g'|sed 's/,0/,/g' > reformat_merge-geno-fam.txt

head -20 reformat_merge-geno-fam.txt


```





